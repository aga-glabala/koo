<div class="table-container">
  <table class="table table-striped mt-5">
      <thead>
          <tr>
              <th>Nazwa</th>
              <th>Wariant</th>
              <th>Cena</th>
              <th *ngFor="let customField of action.customFields">{{ customField.name }}</th>
              <th *ngFor="let order of orders">{{order.ownerName}}</th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let product of action.products">
              <td>{{product.name}}</td>
              <td [innerHtml]="pfHelper.checkText(product.variant)"></td>
              <td><app-price [price]="product.price" [discount]="action.discount"></app-price></td>
              <td *ngFor="let customField of action.customFields">
                  <span *ngIf="product.customFields" [innerHtml]="pfHelper.checkText(product.customFields[customField.id])"></span>
              </td>
              <td *ngFor="let order of orders">{{ order.products[product.id] }}</td>
          </tr>
          <tr>
              <td [attr.colspan]="3 + action.customFields.length">Odbiera</td>
              <td *ngFor="let order of orders">{{ order.pickerName }}</td>
          </tr>
          <tr>
              <td [attr.colspan]="3 + action.customFields.length">Suma</td>                   
              <td *ngFor="let order of orders"><strong>
                  <app-price [price]="sums[order.id]" [discount]="action.discount"></app-price>
              </strong></td>
          </tr>
          <tr>
              <td [attr.colspan]="3 + action.customFields.length"></td> 
              <ng-container *ngFor="let order of orders">
                  <!-- komórki z informacją dla wszystkich -->
                  <td class="bg-success" *ngIf="!actionEditor && order.paid == sums[order.id]">
                      <i class="fas fa-check"></i> Zapłacone
                  </td>
                  <td class="bg-danger" *ngIf="!actionEditor && order.paid != sums[order.id]">
                      <i class="fas fa-times"></i>
                      Nie zapłacone
                  </td>
                  <td *ngIf="actionEditor">
                      <div *ngIf="order.paid == sums[order.id]" [class]="order.paid == sums[order.id] ? 'bg-success' : 'bg-danger'">
                          <i class="fas fa-check"></i> Zapłacone {{ order.paid }}
                      </div>
                      <div *ngIf="order.paid != sums[order.id]">
                          <div [class]="order.paid == sums[order.id] ? 'p-2 bg-success' : 'p-2 bg-danger'">Zapłacono: {{ order.paid }} {{order.paid != 0 ? order.paid : sums[order.id]}}</div>
                          <div class="row">
                            <div class="col-6 pr-0">
                              <input #paidinput [value]="order.paid && order.paid !== 0 ? order.paid : sums[order.id] | price" 
                                type="number" class="form-control">
                            </div>
                            <div class="col-6 pl-0">
                              <input type="button" value="Oznacz jako zapłacone" (click)="orderPayed(order, paidinput.value)" class="w-100 btn btn-success">
                            </div>
                          </div>
                      </div>
                  </td>
              </ng-container>
          </tr>
          <tr>
              <td [attr.colspan]="3 + action.customFields.length"></td> 
              <ng-container *ngFor="let order of orders">
                  <!-- komórki z informacją dla wszystkich -->
                  <td class="bg-success" *ngIf="!actionEditor && order.picked">
                      <i class="fas fa-check"></i> Odebrane
                  </td>
                  <td class="bg-danger" *ngIf="!actionEditor && !order.picked">
                      <i class="fas fa-times"></i> Nie odebrane
                  </td>
                  <td *ngIf="actionEditor">
                      <button *ngIf="order.picked" class="btn btn-success" (click)="orderPicked(order)">
                          <i class="fas fa-check"></i> Odebrane
                      </button>
                      <button *ngIf="!order.picked" class="btn btn-danger" (click)="orderPicked(order)">
                          <i class="fas fa-times"></i> Nie odebrane
                      </button>
                  </td>
              </ng-container>
          </tr>
      </tbody>
  </table>
</div>